{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/index.ts"],"names":[],"mappings":";;;AAAA,iCAAyB;AACzB,4DAAwD;AACxD,kDAA8C;AAC9C,8CAA0C;AAC1C,oDAAgD;AAoBhD,MAAM,QAAQ;IAOV,YAAmB,IAAgB;QAC/B,IAAI,CAAC,IAAI,GAAG;YACR,IAAI,EAAE,4BAA4B;YAClC,SAAS,EAAE,KAAM;YACjB,GAAG,IAAI;SACV,CAAA;QACD,IAAI,CAAC,WAAW,GAAG,IAAI,yBAAW,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;QAC3D,IAAI,CAAC,MAAM,GAAG,IAAI,eAAM,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;QACjD,IAAI,CAAC,IAAI,GAAG,IAAI,WAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;QAC7C,IAAI,CAAC,OAAO,GAAG,IAAI,iBAAO,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;IACvD,CAAC;IACD;;;;OAIG;IACI,KAAK,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,MAAM,EAAE,IAAI,EAAqB;QACzD,IAAI,GAAG,GAAG,EAAE,IAAI,EAAE,EAAE,MAAM,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,CAAA;QAC5C,IAAI,CAAC;YACD,MAAM,MAAM,GAAG;gBACX,MAAM,EAAE,MAAM,IAAI,KAAK;gBACvB,GAAG,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,GAAG,EAAE;gBAC9B,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,SAAS;gBAC5B,IAAI,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC,EAAE;aACpD,CAAA;YACD,GAAG,GAAG,MAAM,eAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAA;YACjC,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;gBACpB,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,IAAI,CAAC,CAAA;gBAC1B,MAAM,IAAI,KAAK,CAAC,GAAG,GAAG,SAAS,CAAC,CAAA;YACpC,CAAC;QACL,CAAC;QAAC,OAAO,GAAG,EAAE,CAAC;YACX,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,CAAA;QAC3B,CAAC;QACD,OAAO,GAAG,CAAC,IAAI,CAAA;IACnB,CAAC;CACJ;AAMQ,4BAAQ","sourcesContent":["import axios from 'axios'\nimport { Application } from './api-endpoint/application'\nimport { Folder } from './api-endpoint/folder'\nimport { Item } from './api-endpoint/item'\nimport { Library } from './api-endpoint/library'\n\ntype Method = 'get' | 'post' | 'patch' | 'delete'\ntype Token = string\nexport type WithToken<P> = P & { token: Token }\nexport type SDKOptions = {\n    token: string\n    host?: string\n    timeoutMs?: number\n}\nexport type RequestParameters = {\n    url: string\n    method?: Method\n    data?: any\n}\nexport type ResponseBody = {\n    status: string\n    data?: any\n}\n\nclass EagleSDK implements EagleSDKImpl {\n    public opts: SDKOptions\n    public readonly application: Application\n    public readonly folder: Folder\n    public readonly item: Item\n    public readonly library: Library\n\n    public constructor(opts: SDKOptions) {\n        this.opts = {\n            host: 'http://localhost:41595/api',\n            timeoutMs: 60_000,\n            ...opts,\n        }\n        this.application = new Application(this.request, this.opts)\n        this.folder = new Folder(this.request, this.opts)\n        this.item = new Item(this.request, this.opts)\n        this.library = new Library(this.request, this.opts)\n    }\n    /**\n     *\n     * @param payload\n     * @returns\n     */\n    public async request({ url, method, data }: RequestParameters): Promise<ResponseBody> {\n        let res = { data: { status: '', data: {} } }\n        try {\n            const config = {\n                method: method || 'get',\n                url: `${this.opts.host}${url}`,\n                timeout: this.opts.timeoutMs,\n                data: { token: this.opts.token, ...(data || {}) },\n            }\n            res = await axios.request(config)\n            if (!res || !res.data) {\n                console.log(url, res.data)\n                throw new Error(url + ' - 请求失败')\n            }\n        } catch (err) {\n            console.log('err', err)\n        }\n        return res.data\n    }\n}\n\nexport interface EagleSDKImpl {\n    request(payload: RequestParameters): Promise<ResponseBody>\n}\n\nexport { EagleSDK }\n"]}